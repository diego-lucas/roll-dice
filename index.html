<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rolador de Dados RPG</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #6a68c0, #3a3a8d);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      color: #fff;
    }
    .container {
      background: #7a78d1;
      padding: 25px 20px;
      border-radius: 15px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.3);
      width: 360px;
      text-align: center;
    }
    h2 {
      margin-top: 10px;
      font-size: 1.8em;
      letter-spacing: 1px;
    }
    input {
      width: 60px;
      padding: 6px;
      margin: 5px;
      text-align: center;
      border-radius: 6px;
      border: 1px solid #403f82;
      background-color: #9a97d9;
      color: #fff;
    }
    input:focus {
      outline: none;
      border-color: #fff;
      box-shadow: 0 0 5px #fff;
    }
    button {
      margin: 10px 5px;
      padding: 10px 15px;
      border: none;
      border-radius: 10px;
      background: #5c5aba;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #50509d;
    }
    .result {
      margin-top: 15px;
      font-size: 1.1em;
      background-color: rgba(255,255,255,0.1);
      padding: 8px;
      border-radius: 8px;
      display: none;
    }
    hr {
      margin: 20px 0;
      border: 1px solid rgba(255,255,255,0.3);
    }
    .dice-animation {
      width: 50px;
      display: none;
      margin: 10px auto;
    }
    .logo {
      width: 180px;
      margin-bottom: 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="logo.png" class="logo" alt="Logo">
    <h2>Rolador de Dados RPG</h2>

    <div>
      <label>Força:</label>
      <input type="number" id="forca" min="0">
    </div>
    <div>
      <label>Agilidade:</label>
      <input type="number" id="agilidade" min="0">
    </div>
    <div>
      <label>Astúcia:</label>
      <input type="number" id="astucia" min="0">
    </div>
    <div>
      <label>Vontade:</label>
      <input type="number" id="vontade" min="0">
    </div>

    <div>
      <button onclick="rolar('forca')">Rolar Força</button>
      <button onclick="rolar('agilidade')">Rolar Agilidade</button>
      <button onclick="rolar('astucia')">Rolar Astúcia</button>
      <button onclick="rolar('vontade')">Rolar Vontade</button>
    </div>

    <div class="result" id="resultado"></div>
    <video id="diceAnimationAttr" class="dice-animation" autoplay muted loop>
      <source src="dice.webm" type="video/webm">
    </video>

    <hr>
    <h3>Rolagem de Dados Avulsos</h3>
    <div>
      <button onclick="rolarDado(6)">Rolar d6</button>
      <button onclick="rolarDado(8)">Rolar d8</button>
      <button onclick="rolarDado(20)">Rolar d20</button>
    </div>

    <div class="result" id="resultadoDado"></div>
    <video id="diceAnimationFree" class="dice-animation" autoplay muted loop>
      <source src="dice.webm" type="video/webm">
    </video>
  </div>

  <script>
    function setCookie(name, value, days = 365) {
      const d = new Date();
      d.setTime(d.getTime() + days*24*60*60*1000);
      document.cookie = `${name}=${value};expires=${d.toUTCString()};path=/`;
    }

    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
      return null;
    }

    function carregarAtributos() {
      ['forca','agilidade','astucia','vontade'].forEach(attr => {
        const val = getCookie(attr);
        if (val !== null) document.getElementById(attr).value = val;
      });
    }

    function salvarAtributos() {
      ['forca','agilidade','astucia','vontade'].forEach(attr => {
        const val = document.getElementById(attr).value;
        setCookie(attr, val);
      });
    }

    function rolar(atributo) {
      salvarAtributos();
      const qtd = parseInt(document.getElementById(atributo).value);
      if (isNaN(qtd) || qtd <= 0) {
        const res = document.getElementById("resultado");
        res.innerText = "Coloque um valor válido.";
        res.style.display = 'block';
        return;
      }

      const anim = document.getElementById('diceAnimationAttr');
      const res = document.getElementById('resultado');
      anim.style.display = 'block';
      res.style.display = 'none';

      setTimeout(() => {
        anim.style.display = 'none';

        let dados = [];
        let sucessos = 0;
        for (let i = 0; i < qtd; i++) {
          let d = Math.floor(Math.random() * 6) + 1;
          dados.push(d);
          if (d >= 4) sucessos++;
        }

        res.innerHTML = `<strong>Rolagem de ${atributo}:</strong><br>Dados: [${dados.join(", ")}]<br>Sucessos: <strong>${sucessos}</strong>`;
        res.style.display = 'block';
      }, 1000);
    }

    function rolarDado(lados) {
      const anim = document.getElementById('diceAnimationFree');
      const res = document.getElementById('resultadoDado');
      anim.style.display = 'block';
      res.style.display = 'none';

      setTimeout(() => {
        anim.style.display = 'none';
        let d = Math.floor(Math.random() * lados) + 1;
        res.innerHTML = `<strong>Rolagem de d${lados}:</strong> ${d}`;
        res.style.display = 'block';
      }, 1000);
    }

    carregarAtributos();
  </script>
</body>
</html>
